% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_graduation.R
\name{fetch_graduation}
\alias{fetch_graduation}
\title{Fetch Virginia graduation rate data}
\usage{
fetch_graduation(end_year, tidy = TRUE, use_cache = TRUE)
}
\arguments{
\item{end_year}{A school year. Year is the end of the academic year - eg 2022-23
school year is year '2023'. Valid values are 2019-2023.}

\item{tidy}{If TRUE (default), returns data in long (tidy) format with
diploma_type column. If FALSE, returns wide format with one row per school.}

\item{use_cache}{If TRUE (default), uses locally cached data when available.
Set to FALSE to force re-download from VDOE.}
}
\value{
Data frame with graduation rate data. Wide format includes columns for
division/school names, counts, and rates by diploma type. Tidy format pivots
diploma counts into diploma_type and diploma_count columns.
}
\description{
Downloads and processes graduation rate data from the Virginia Department of
Education (VDOE). Data is sourced from VDOE's Cohort Graduation and Dropout
Report available through the Open Data Portal.
}
\examples{
\dontrun{
# Get 2023 graduation data (2022-23 school year)
grad_2023 <- fetch_graduation(2023)

# Get wide format
grad_wide <- fetch_graduation(2023, tidy = FALSE)

# Force fresh download (ignore cache)
grad_fresh <- fetch_graduation(2023, use_cache = FALSE)

# Filter to state-level
grad_2023 |>
  dplyr::filter(is_state, diploma_type == "all") |>
  dplyr::select(graduation_rate, cohort_size, total_graduates)

# Compare schools
grad_2023 |>
  dplyr::filter(is_school, diploma_type == "all") |>
  dplyr::arrange(dplyr::desc(graduation_rate)) |>
  dplyr::select(school_name, graduation_rate, cohort_size)
}
}
